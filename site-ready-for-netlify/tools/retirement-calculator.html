<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>M√°y T√≠nh Ngh·ªâ H∆∞u - T√†i Ch√≠nh Gia ƒê√¨nh</title>
    <meta name="description" content="L·∫≠p k·∫ø ho·∫°ch ti·∫øt ki·ªám cho h∆∞u tr√≠ v√† t√≠nh to√°n th·ªùi gian ngh·ªâ h∆∞u.">
    <link rel="stylesheet" href="../styles/main.css">
    <link rel="stylesheet" href="../styles/calculator.css">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
</head>
<body>
    <!-- Navigation -->
    <nav class="navbar">
        <div class="nav-container">
            <div class="nav-logo">
                <a href="../index.html"><h2><img src="../assets/logo.svg" alt="Self-Reliant Money Logo" class="logo-icon">Self-Reliant Money</h2></a>
            </div>
            <ul class="nav-menu">
                <li class="nav-item">
                    <a href="../index.html" class="nav-link">Trang Ch·ªß</a>
                </li>
                <li class="nav-item">
                    <a href="../index.html#courses" class="nav-link">Kh√≥a H·ªçc</a>
                </li>
                <li class="nav-item">
                    <a href="../index.html#tools" class="nav-link">C√¥ng C·ª•</a>
                </li>
                <li class="nav-item">
                    <a href="../index.html#contact" class="nav-link">Li√™n H·ªá</a>
                </li>
                <li class="nav-item"><button class="lang-toggle" onclick="window.location.href='en/tools/retirement-calculator.html'">üåê EN</button></li>
            </ul>
            <div class="hamburger">
                <span class="bar"></span>
                <span class="bar"></span>
                <span class="bar"></span>
            </div>
        </div>
    </nav>

    <!-- Tool Header -->
    <section class="tool-header">
        <div class="container">
            <div class="breadcrumb">
                <a href="../index.html">Trang Ch·ªß</a> / 
                <a href="../index.html#tools">C√¥ng C·ª•</a> / 
                <span>M√°y T√≠nh Ngh·ªâ H∆∞u</span>
            </div>
            <h1>üèñÔ∏è M√°y T√≠nh Ngh·ªâ H∆∞u</h1>
            <p class="tool-subtitle">L·∫≠p k·∫ø ho·∫°ch ti·∫øt ki·ªám cho h∆∞u tr√≠</p>
        </div>
    </section>

    <!-- Calculator Section -->
    <section class="calculator-section">
        <div class="container">
            <div class="calculator-container">
                <div class="calculator-inputs">
                    <h2>M√°y T√≠nh K·∫ø Ho·∫°ch Ngh·ªâ H∆∞u</h2>
                    
                    <div class="input-group">
                        <label for="currentAge">Tu·ªïi Hi·ªán T·∫°i</label>
                        <input type="number" id="currentAge" value="30" min="18" max="80" step="1">
                        <small>Tu·ªïi hi·ªán t·∫°i c·ªßa b·∫°n</small>
                    </div>

                    <div class="input-group">
                        <label for="retirementAge">Tu·ªïi D·ª± ƒê·ªãnh Ngh·ªâ H∆∞u</label>
                        <input type="number" id="retirementAge" value="65" min="50" max="80" step="1">
                        <small>Tu·ªïi b·∫°n d·ª± ƒë·ªãnh ngh·ªâ h∆∞u</small>
                    </div>

                    <div class="input-group">
                        <label for="currentIncome">Thu Nh·∫≠p Hi·ªán T·∫°i (VND)</label>
                        <input type="number" id="currentIncome" value="1500000000" min="0" step="1000000">
                        <small>Thu nh·∫≠p h√†ng nƒÉm hi·ªán t·∫°i tr∆∞·ªõc thu·∫ø</small>
                    </div>

                    <div class="input-group">
                        <label for="retirementIncome">Thu Nh·∫≠p Mong Mu·ªën Khi H∆∞u Tr√≠ (%)</label>
                        <select id="retirementIncome">
                            <option value="70">70% thu nh·∫≠p hi·ªán t·∫°i</option>
                            <option value="80" selected>80% thu nh·∫≠p hi·ªán t·∫°i</option>
                            <option value="90">90% thu nh·∫≠p hi·ªán t·∫°i</option>
                            <option value="100">100% thu nh·∫≠p hi·ªán t·∫°i</option>
                        </select>
                        <small>T·ª∑ l·ªá % thu nh·∫≠p hi·ªán t·∫°i b·∫°n c·∫ßn khi ngh·ªâ h∆∞u</small>
                    </div>

                    <div class="input-group">
                        <label for="currentSavings">Ti·∫øt Ki·ªám H∆∞u Tr√≠ Hi·ªán T·∫°i (VND)</label>
                        <input type="number" id="currentSavings" value="1250000000" min="0" step="1000000">
                        <small>S·ªë ti·ªÅn ƒë√£ ti·∫øt ki·ªám cho h∆∞u tr√≠ (qu·ªπ h∆∞u tr√≠, t√≠ch l≈©y, v.v.)</small>
                    </div>

                    <div class="input-group">
                        <label for="monthlyContribution">Ti·∫øt Ki·ªám H√†ng Th√°ng (VND)</label>
                        <input type="number" id="monthlyContribution" value="12500000" min="0" step="500000">
                        <small>S·ªë ti·ªÅn b·∫°n d·ª± ƒë·ªãnh ti·∫øt ki·ªám m·ªói th√°ng</small>
                    </div>

                    <div class="input-group">
                        <label for="expectedReturn">L·ª£i Nhu·∫≠n ƒê·∫ßu T∆∞ K·ª≥ V·ªçng (%)</label>
                        <input type="number" id="expectedReturn" value="7" min="1" max="15" step="0.1">
                        <small>L·ª£i nhu·∫≠n h√†ng nƒÉm k·ª≥ v·ªçng t·ª´ ƒë·∫ßu t∆∞ (6-8% l√† ƒëi·ªÉn h√¨nh)</small>
                    </div>

                    <div class="input-group">
                        <label for="inflationRate">T·ª∑ L·ªá L·∫°m Ph√°t (%)</label>
                        <input type="number" id="inflationRate" value="4" min="1" max="10" step="0.1">
                        <small>T·ª∑ l·ªá l·∫°m ph√°t h√†ng nƒÉm k·ª≥ v·ªçng</small>
                    </div>

                    <button type="button" class="btn btn-primary" onclick="calculateRetirement()">T√≠nh To√°n Ngh·ªâ H∆∞u</button>
                </div>

                <div class="calculator-results">
                    <div id="results" class="results-container">
                        <h3>K·∫ø Ho·∫°ch Ngh·ªâ H∆∞u C·ªßa B·∫°n</h3>
                        
                        <div class="result-cards">
                            <div class="result-card">
                                <div class="result-value" id="totalSavings">0 VND</div>
                                <div class="result-label">D·ª± Ki·∫øn Ti·∫øt Ki·ªám Khi Ngh·ªâ H∆∞u</div>
                            </div>
                            <div class="result-card">
                                <div class="result-value" id="targetAmount">0 VND</div>
                                <div class="result-label">M·ª•c Ti√™u S·ªë Ti·ªÅn Ngh·ªâ H∆∞u</div>
                            </div>
                            <div class="result-card" id="shortfallCard">
                                <div class="result-value" id="shortfall">0 VND</div>
                                <div class="result-label" id="shortfallLabel">Thi·∫øu H·ª•t D·ª± Ki·∫øn</div>
                            </div>
                        </div>

                        <!-- Chart Container -->
                        <div class="chart-container">
                            <canvas id="retirementChart"></canvas>
                        </div>

                        <!-- Retirement Details -->
                        <div class="retirement-details">
                            <h4>Ph√¢n T√≠ch Ngh·ªâ H∆∞u</h4>
                            <div class="detail-grid">
                                <div class="detail-item">
                                    <span class="detail-label">S·ªë NƒÉm ƒê·∫øn Ngh·ªâ H∆∞u:</span>
                                    <span class="detail-value" id="yearsToRetirement">35 nƒÉm</span>
                                </div>
                                <div class="detail-item">
                                    <span class="detail-label">Thu Nh·∫≠p H√†ng NƒÉm C·∫ßn:</span>
                                    <span class="detail-value" id="annualIncomeNeeded">1.200.000.000 VND</span>
                                </div>
                                <div class="detail-item">
                                    <span class="detail-label">Thu Nh·∫≠p H√†ng Th√°ng C·∫ßn:</span>
                                    <span class="detail-value" id="monthlyIncomeNeeded">100.000.000 VND</span>
                                </div>
                                <div class="detail-item">
                                    <span class="detail-label">T·ª∑ L·ªá Ti·∫øt Ki·ªám H√†ng Th√°ng:</span>
                                    <span class="detail-value" id="savingsRate">10%</span>
                                </div>
                            </div>
                        </div>

                        <!-- 4% Rule Analysis -->
                        <div class="rule-analysis">
                            <h4>Quy T·∫Øc R√∫t 4%</h4>
                            <div class="rule-explanation">
                                <p>S·ª≠ d·ª•ng quy t·∫Øc 4%, b·∫°n c√≥ th·ªÉ r√∫t 4% ti·∫øt ki·ªám h∆∞u tr√≠ h√†ng nƒÉm m√† kh√¥ng c·∫°n ki·ªát qu·ªπ.</p>
                                <div class="rule-calculation">
                                    <div class="rule-item">
                                        <span class="rule-label">Ti·∫øt Ki·ªám D·ª± Ki·∫øn:</span>
                                        <span class="rule-value" id="projectedSavings">0 VND</span>
                                    </div>
                                    <div class="rule-item">
                                        <span class="rule-label">R√∫t 4% H√†ng NƒÉm:</span>
                                        <span class="rule-value" id="annualWithdrawal">0 VND</span>
                                    </div>
                                    <div class="rule-item">
                                        <span class="rule-label">Thu Nh·∫≠p H√†ng Th√°ng T·ª´ Ti·∫øt Ki·ªám:</span>
                                        <span class="rule-value" id="monthlyFromSavings">0 VND</span>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <!-- Scenarios -->
                        <div class="scenarios-section">
                            <h4>C√°c T√¨nh Hu·ªëng Gi·∫£ ƒê·ªãnh</h4>
                            <div class="scenario-cards">
                                <div class="scenario-card">
                                    <h5>Ngh·ªâ H∆∞u S·ªõm 5 NƒÉm</h5>
                                    <div class="scenario-value" id="earlierRetirement">C·∫ßn +5.000.000 VND/th√°ng</div>
                                </div>
                                <div class="scenario-card">
                                    <h5>Ti·∫øt Ki·ªám Th√™m +2.5 Tri·ªáu/Th√°ng</h5>
                                    <div class="scenario-value" id="extraSavings">+2.1 t·ª∑ VND khi ngh·ªâ h∆∞u</div>
                                </div>
                                <div class="scenario-card">
                                    <h5>L·ª£i Nhu·∫≠n Cao H∆°n 1%</h5>
                                    <div class="scenario-value" id="higherReturns">+3.8 t·ª∑ VND khi ngh·ªâ h∆∞u</div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <!-- Educational Content -->
    <section class="education-section">
        <div class="container">
            <div class="education-content">
                <h2>Ki·∫øn Th·ª©c C∆° B·∫£n V·ªÅ K·∫ø Ho·∫°ch Ngh·ªâ H∆∞u</h2>
                <div class="education-grid">
                    <div class="education-card">
                        <h3>üéØ Quy T·∫Øc 25x</h3>
                        <p>Quy t·∫Øc ph·ªï bi·∫øn l√† ti·∫øt ki·ªám 25 l·∫ßn chi ph√≠ h√†ng nƒÉm cho ngh·ªâ h∆∞u. ƒêi·ªÅu n√†y h·ªó tr·ª£ quy t·∫Øc r√∫t 4%.</p>
                        <ul>
                            <li>T√≠nh to√°n chi ph√≠ h√†ng nƒÉm khi ngh·ªâ h∆∞u</li>
                            <li>Nh√¢n v·ªõi 25 ƒë·ªÉ c√≥ m·ª•c ti√™u</li>
                            <li>ƒêi·ªÅu ch·ªânh theo BHXH v√† l∆∞∆°ng h∆∞u</li>
                            <li>Xem x√©t v√† c·∫≠p nh·∫≠t ƒë·ªãnh k·ª≥</li>
                        </ul>
                    </div>

                    <div class="education-card">
                        <h3>üìä Ph√¢n B·ªï T√†i S·∫£n</h3>
                        <p>ƒêa d·∫°ng h√≥a ti·∫øt ki·ªám h∆∞u tr√≠ qua c√°c lo·∫°i t√†i s·∫£n kh√°c nhau d·ª±a tr√™n tu·ªïi v√† kh·∫£ nƒÉng ch·ªãu r·ªßi ro.</p>
                        <ul>
                            <li>C·ªï phi·∫øu cho ti·ªÅm nƒÉng tƒÉng tr∆∞·ªüng</li>
                            <li>Tr√°i phi·∫øu cho s·ª± ·ªïn ƒë·ªãnh v√† thu nh·∫≠p</li>
                            <li>B·∫•t ƒë·ªông s·∫£n ch·ªëng l·∫°m ph√°t</li>
                            <li>ƒêi·ªÅu ch·ªânh ph√¢n b·ªï theo tu·ªïi</li>
                        </ul>
                    </div>

                    <div class="education-card">
                        <h3>üèõÔ∏è C√°c Lo·∫°i T√†i Kho·∫£n</h3>
                        <p>S·ª≠ d·ª•ng c√°c lo·∫°i t√†i kho·∫£n h∆∞u tr√≠ kh√°c nhau m·ªôt c√°ch chi·∫øn l∆∞·ª£c ƒë·ªÉ c√≥ l·ª£i th·∫ø v·ªÅ thu·∫ø.</p>
                        <ul>
                            <li>Qu·ªπ h∆∞u tr√≠ doanh nghi·ªáp</li>
                            <li>T√†i kho·∫£n ti·∫øt ki·ªám c√° nh√¢n</li>
                            <li>ƒê·∫ßu t∆∞ c·ªï phi·∫øu d√†i h·∫°n</li>
                            <li>B·∫£o hi·ªÉm nh√¢n th·ªç c√≥ ƒë·∫ßu t∆∞</li>
                        </ul>
                    </div>

                    <div class="education-card">
                        <h3>‚è∞ B·∫Øt ƒê·∫ßu S·ªõm</h3>
                        <p>Th·ªùi gian l√† t√†i s·∫£n l·ªõn nh·∫•t trong k·∫ø ho·∫°ch ngh·ªâ h∆∞u nh·ªù v√†o l√£i k√©p.</p>
                        <ul>
                            <li>B·∫Øt ƒë·∫ßu ti·∫øt ki·ªám c√†ng s·ªõm c√†ng t·ªët</li>
                            <li>TƒÉng ti·∫øt ki·ªám khi c√≥ tƒÉng l∆∞∆°ng</li>
                            <li>T·ª± ƒë·ªông h√≥a vi·ªác ti·∫øt ki·ªám</li>
                            <li>T·∫≠n d·ª•ng c√°c ch√≠nh s√°ch h·ªó tr·ª£</li>
                        </ul>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <!-- Related Tools -->
    <section class="related-tools">
        <div class="container">
            <div class="tools-grid">
                <h3>üîó C√¥ng C·ª• Kh√°c</h3>
                <div class="tool-cards">
                    <div class="tool-card">
                        <div class="tool-icon">üìà</div>
                        <h4>M√°y T√≠nh L√£i K√©p</h4>
                        <p>Xem s·ª± tƒÉng tr∆∞·ªüng ƒë·∫ßu t∆∞ theo th·ªùi gian</p>
                        <a href="compound-calculator.html" class="btn btn-outline">S·ª≠ D·ª•ng</a>
                    </div>
                    <div class="tool-card">
                        <div class="tool-icon">üßÆ</div>
                        <h4>M√°y T√≠nh Ng√¢n S√°ch</h4>
                        <p>L·∫≠p k·∫ø ho·∫°ch ng√¢n s√°ch gia ƒë√¨nh h√†ng th√°ng</p>
                        <a href="budget-calculator.html" class="btn btn-outline">S·ª≠ D·ª•ng</a>
                    </div>
                    <div class="tool-card">
                        <div class="tool-icon">üí∞</div>
                        <h4>Qu·ªπ Kh·∫©n C·∫•p</h4>
                        <p>T√≠nh ti·ªÅn ti·∫øt ki·ªám kh·∫©n c·∫•p c·∫ßn thi·∫øt</p>
                        <a href="emergency-fund.html" class="btn btn-outline">S·ª≠ D·ª•ng</a>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <!-- CTA Section -->
    <section class="cta-section">
        <div class="container">
            <h2>L·∫≠p K·∫ø Ho·∫°ch Ngh·ªâ H∆∞u</h2>
            <p>H·ªçc c√°c chi·∫øn l∆∞·ª£c ngh·ªâ h∆∞u to√†n di·ªán qua kh√≥a h·ªçc chi ti·∫øt c·ªßa ch√∫ng t√¥i</p>
            <a href="../courses/retirement.html" class="btn btn-primary">H·ªçc K·∫ø Ho·∫°ch Ngh·ªâ H∆∞u</a>
        </div>
    </section>

    <!-- Footer -->
    <footer class="footer">
        <div class="container">
            <div class="footer-content">
                <div class="footer-section">
                    <h3><img src="../assets/logo.svg" alt="Self-Reliant Money Logo" class="logo-icon">Self-Reliant Money</h3>
                    <p>X√¢y d·ª±ng t∆∞∆°ng lai t√†i ch√≠nh v·ªØng ch·∫Øc cho gia ƒë√¨nh b·∫°n</p>
                </div>
                <div class="footer-section">
                    <h4>C√¥ng C·ª• Kh√°c</h4>
                    <ul>
                        <li><a href="budget-calculator.html">M√°y T√≠nh Ng√¢n S√°ch</a></li>
                        <li><a href="compound-calculator.html">M√°y T√≠nh L√£i K√©p</a></li>
                        <li><a href="mortgage-calculator.html">M√°y T√≠nh Vay Mua Nh√†</a></li>
                    </ul>
                </div>
                <div class="footer-section">
                    <h4>T√¨m Hi·ªÉu Th√™m</h4>
                    <ul>
                        <li><a href="../courses/budgeting.html">Ng√¢n S√°ch Gia ƒê√¨nh</a></li>
                        <li><a href="../courses/investing.html">ƒê·∫ßu T∆∞ C∆° B·∫£n</a></li>
                        <li><a href="../courses/retirement.html">K·∫ø Ho·∫°ch Ngh·ªâ H∆∞u</a></li>
                    </ul>
                </div>
            </div>
            <div class="footer-bottom">
                <p>&copy; 2024 T√†i Ch√≠nh Gia ƒê√¨nh. T·∫•t c·∫£ quy·ªÅn ƒë∆∞·ª£c b·∫£o l∆∞u.</p>
            </div>
        </div>
    </footer>

    <!-- Chart.js for graphs -->
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    
    <script>
    function calculateRetirement() {
        const currentAge = parseInt(document.getElementById('currentAge').value) || 30;
        const retirementAge = parseInt(document.getElementById('retirementAge').value) || 65;
        const currentIncome = parseFloat(document.getElementById('currentIncome').value) || 1500000000;
        const retirementIncomePercent = parseInt(document.getElementById('retirementIncome').value) || 80;
        const currentSavings = parseFloat(document.getElementById('currentSavings').value) || 1250000000;
        const monthlyContribution = parseFloat(document.getElementById('monthlyContribution').value) || 12500000;
        const expectedReturn = parseFloat(document.getElementById('expectedReturn').value) / 100 || 0.07;
        const inflationRate = parseFloat(document.getElementById('inflationRate').value) / 100 || 0.04;
        
        const yearsToRetirement = retirementAge - currentAge;
        const monthsToRetirement = yearsToRetirement * 12;
        const monthlyReturn = expectedReturn / 12;
        
        // Calculate future value of current savings
        const futureValueCurrent = currentSavings * Math.pow(1 + expectedReturn, yearsToRetirement);
        
        // Calculate future value of monthly contributions
        let futureValueContributions = 0;
        if (monthlyReturn > 0) {
            futureValueContributions = monthlyContribution * ((Math.pow(1 + monthlyReturn, monthsToRetirement) - 1) / monthlyReturn);
        } else {
            futureValueContributions = monthlyContribution * monthsToRetirement;
        }
        
        const totalSavings = futureValueCurrent + futureValueContributions;
        
        // Calculate needed retirement income (adjusted for inflation)
        const futureIncome = currentIncome * Math.pow(1 + inflationRate, yearsToRetirement);
        const neededAnnualIncome = futureIncome * (retirementIncomePercent / 100);
        const neededMonthlyIncome = neededAnnualIncome / 12;
        
        // Using 4% rule to determine needed savings
        const targetAmount = neededAnnualIncome * 25;
        const shortfall = targetAmount - totalSavings;
        
        // Calculate savings rate
        const savingsRate = (monthlyContribution * 12) / currentIncome * 100;
        
        // 4% rule calculations
        const annualWithdrawal = totalSavings * 0.04;
        const monthlyFromSavings = annualWithdrawal / 12;
        
        // Update results
        document.getElementById('totalSavings').textContent = formatCurrencyVND(totalSavings);
        document.getElementById('targetAmount').textContent = formatCurrencyVND(targetAmount);
        document.getElementById('shortfall').textContent = formatCurrencyVND(Math.abs(shortfall));
        document.getElementById('yearsToRetirement').textContent = `${yearsToRetirement} nƒÉm`;
        document.getElementById('annualIncomeNeeded').textContent = formatCurrencyVND(neededAnnualIncome);
        document.getElementById('monthlyIncomeNeeded').textContent = formatCurrencyVND(neededMonthlyIncome);
        document.getElementById('savingsRate').textContent = `${savingsRate.toFixed(1)}%`;
        document.getElementById('projectedSavings').textContent = formatCurrencyVND(totalSavings);
        document.getElementById('annualWithdrawal').textContent = formatCurrencyVND(annualWithdrawal);
        document.getElementById('monthlyFromSavings').textContent = formatCurrencyVND(monthlyFromSavings);
        
        // Update shortfall card styling
        const shortfallCard = document.getElementById('shortfallCard');
        const shortfallLabel = document.getElementById('shortfallLabel');
        if (shortfall <= 0) {
            shortfallCard.className = 'result-card surplus';
            shortfallLabel.textContent = 'Th·∫∑ng D∆∞';
        } else {
            shortfallCard.className = 'result-card deficit';
            shortfallLabel.textContent = 'Thi·∫øu H·ª•t';
        }
        
        // Calculate scenarios
        const earlierYears = yearsToRetirement - 5;
        const earlierMonths = earlierYears * 12;
        const earlierFutureValue = currentSavings * Math.pow(1 + expectedReturn, earlierYears);
        const earlierTarget = neededAnnualIncome * 25;
        const earlierNeeded = earlierTarget - earlierFutureValue;
        const earlierMonthlyNeeded = earlierNeeded / (earlierMonths > 0 ? earlierMonths : 1);
        const extraNeeded = earlierMonthlyNeeded - monthlyContribution;
        
        const extraMonthlySavings = monthlyContribution + 2500000;
        const extraFutureValue = extraMonthlySavings * ((Math.pow(1 + monthlyReturn, monthsToRetirement) - 1) / monthlyReturn);
        const extraTotal = futureValueCurrent + extraFutureValue;
        const extraGain = extraTotal - totalSavings;
        
        const higherReturn = (expectedReturn + 0.01) / 12;
        const higherFutureValue = monthlyContribution * ((Math.pow(1 + higherReturn, monthsToRetirement) - 1) / higherReturn);
        const higherTotal = futureValueCurrent + higherFutureValue;
        const higherGain = higherTotal - totalSavings;
        
        document.getElementById('earlierRetirement').textContent = extraNeeded > 0 ? `C·∫ßn +${formatCurrencyVND(extraNeeded)}/th√°ng` : 'ƒê·ªß ƒëi·ªÅu ki·ªán!';
        document.getElementById('extraSavings').textContent = `+${formatCurrencyVND(extraGain)} khi ngh·ªâ h∆∞u`;
        document.getElementById('higherReturns').textContent = `+${formatCurrencyVND(higherGain)} khi ngh·ªâ h∆∞u`;
        
        // Create chart
        createRetirementChart(currentSavings, totalSavings, yearsToRetirement);
    }
    
    function createRetirementChart(current, target, years) {
        const ctx = document.getElementById('retirementChart').getContext('2d');
        
        // Destroy existing chart if it exists
        if (window.retirementChart) {
            window.retirementChart.destroy();
        }
        
        const data = [current];
        const labels = ['Hi·ªán T·∫°i'];
        
        // Add data points every 5 years
        for (let year = 5; year <= years; year += 5) {
            const value = current * Math.pow(1.07, year); // Simplified calculation for chart
            data.push(value);
            labels.push(`NƒÉm ${year}`);
        }
        
        // Add final value
        if (years % 5 !== 0) {
            data.push(target);
            labels.push(`NƒÉm ${years}`);
        }
        
        window.retirementChart = new Chart(ctx, {
            type: 'line',
            data: {
                labels: labels,
                datasets: [{
                    label: 'Ti·∫øt Ki·ªám D·ª± Ki·∫øn',
                    data: data,
                    borderColor: '#27ae60',
                    backgroundColor: 'rgba(39, 174, 96, 0.1)',
                    fill: true,
                    tension: 0.4
                }]
            },
            options: {
                responsive: true,
                scales: {
                    y: {
                        beginAtZero: true,
                        ticks: {
                            callback: function(value) {
                                return formatCurrencyVND(value);
                            }
                        }
                    }
                },
                plugins: {
                    tooltip: {
                        callbacks: {
                            label: function(context) {
                                return context.dataset.label + ': ' + formatCurrencyVND(context.parsed.y);
                            }
                        }
                    }
                }
            }
        });
    }
    
    function formatCurrencyVND(amount) {
        if (amount >= 1000000000) {
            return (amount / 1000000000).toFixed(1) + ' t·ª∑ VND';
        } else if (amount >= 1000000) {
            return (amount / 1000000).toFixed(0) + ' tri·ªáu VND';
        } else {
            return new Intl.NumberFormat('vi-VN').format(amount) + ' VND';
        }
    }
    
    // Calculate on page load
    document.addEventListener('DOMContentLoaded', function() {
        calculateRetirement();
        
        // Add event listeners for real-time calculation
        const inputs = [
            'currentAge', 'retirementAge', 'currentIncome', 'retirementIncome',
            'currentSavings', 'monthlyContribution', 'expectedReturn', 'inflationRate'
        ];
        
        inputs.forEach(inputId => {
            const element = document.getElementById(inputId);
            if (element) {
                element.addEventListener('input', calculateRetirement);
            }
        });
    });
    
    // Mobile menu toggle
    document.addEventListener('DOMContentLoaded', function() {
        const hamburger = document.querySelector('.hamburger');
        const navMenu = document.querySelector('.nav-menu');
        
        if (hamburger && navMenu) {
            hamburger.addEventListener('click', function() {
                hamburger.classList.toggle('active');
                navMenu.classList.toggle('active');
            });
        }
    });
    </script>
</body>
</html>
<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>M√°y T√≠nh Vay Mua Nh√† - T√†i Ch√≠nh Gia ƒê√¨nh</title>
    <meta name="description" content="T√≠nh to√°n kho·∫£n vay, l√£i su·∫•t v√† kh·∫£ nƒÉng chi tr·∫£ khi mua nh√†.">
    <link rel="stylesheet" href="../styles/main.css">
    <link rel="stylesheet" href="../styles/calculator.css">
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
</head>
<body>
    <nav class="navbar">
        <div class="nav-container">
            <div class="nav-logo">
                <a href="../index.html"><h2>üí∞ T√†i Ch√≠nh Gia ƒê√¨nh</h2></a>
            </div>
            <ul class="nav-menu">
                <li class="nav-item"><a href="../index.html" class="nav-link">Trang Ch·ªß</a></li>
                <li class="nav-item"><a href="../index.html#courses" class="nav-link">Kh√≥a H·ªçc</a></li>
                <li class="nav-item"><a href="../index.html#tools" class="nav-link">C√¥ng C·ª•</a></li>
                <li class="nav-item"><a href="../index.html#contact" class="nav-link">Li√™n H·ªá</a></li>
                <li class="nav-item"><button class="lang-toggle" onclick="toggleLanguage()">üåê EN</button></li>
            </ul>
        </div>
    </nav>

    <section class="tool-header">
        <div class="container">
            <h1>üè† M√°y T√≠nh Vay Mua Nh√†</h1>
            <p>T√≠nh to√°n kho·∫£n vay v√† kh·∫£ nƒÉng chi tr·∫£ h√†ng th√°ng</p>
        </div>
    </section>

    <div class="tool-container">
        <div class="calculator-card">
            <h2>Th√¥ng Tin Kho·∫£n Vay</h2>
            
            <div class="input-group">
                <label>Gi√° tr·ªã b·∫•t ƒë·ªông s·∫£n (VNƒê):</label>
                <input type="number" id="property-value" placeholder="V√≠ d·ª•: 3000000000">
            </div>

            <div class="input-group">
                <label>V·ªën t·ª± c√≥ (VNƒê):</label>
                <input type="number" id="down-payment" placeholder="V√≠ d·ª•: 600000000">
            </div>

            <div class="input-group">
                <label>L√£i su·∫•t (%/nƒÉm):</label>
                <input type="number" step="0.1" id="interest-rate" placeholder="V√≠ d·ª•: 9.5">
            </div>

            <div class="input-group">
                <label>Th·ªùi h·∫°n vay (nƒÉm):</label>
                <input type="number" id="loan-term" placeholder="V√≠ d·ª•: 20">
            </div>

            <button class="calculate-btn" onclick="calculateMortgage()">T√≠nh To√°n</button>

            <div id="mortgage-results" class="results-section" style="display: none;">
                <h3>K·∫øt Qu·∫£</h3>
                <div class="result-grid">
                    <div class="result-item">
                        <h4>S·ªë ti·ªÅn vay</h4>
                        <span id="loan-amount" class="result-amount"></span>
                    </div>
                    <div class="result-item">
                        <h4>Tr·∫£ h√†ng th√°ng</h4>
                        <span id="monthly-payment" class="result-amount"></span>
                    </div>
                    <div class="result-item">
                        <h4>T·ªïng l√£i ph·∫£i tr·∫£</h4>
                        <span id="total-interest" class="result-amount"></span>
                    </div>
                    <div class="result-item">
                        <h4>T·ªïng c·ªông</h4>
                        <span id="total-payment" class="result-amount"></span>
                    </div>
                </div>
                <div id="mortgage-advice" class="recommendations"></div>
            </div>
        </div>
    </div>

    <footer class="footer">
        <div class="container">
            <div class="footer-content">
                <div class="footer-section">
                    <h3>üí∞ T√†i Ch√≠nh Gia ƒê√¨nh</h3>
                    <p>X√¢y d·ª±ng t∆∞∆°ng lai t√†i ch√≠nh v·ªØng ch·∫Øc cho gia ƒë√¨nh b·∫°n</p>
                </div>
            </div>
            <div class="footer-bottom">
                <p>&copy; 2024 T√†i Ch√≠nh Gia ƒê√¨nh. T·∫•t c·∫£ quy·ªÅn ƒë∆∞·ª£c b·∫£o l∆∞u.</p>
            </div>
        </div>
    </footer>

    <script src="../scripts/main.js"></script>
    <script src="../scripts/i18n.js"></script>
    <script>
    function calculateMortgage() {
        const propertyValue = parseFloat(document.getElementById('property-value').value) || 0;
        const downPayment = parseFloat(document.getElementById('down-payment').value) || 0;
        const annualRate = parseFloat(document.getElementById('interest-rate').value) || 0;
        const years = parseFloat(document.getElementById('loan-term').value) || 0;

        const loanAmount = propertyValue - downPayment;
        const monthlyRate = annualRate / 100 / 12;
        const numPayments = years * 12;

        const monthlyPayment = loanAmount * (monthlyRate * Math.pow(1 + monthlyRate, numPayments)) / 
                              (Math.pow(1 + monthlyRate, numPayments) - 1);
        
        const totalPayment = monthlyPayment * numPayments;
        const totalInterest = totalPayment - loanAmount;

        document.getElementById('loan-amount').textContent = loanAmount.toLocaleString('vi-VN') + ' VNƒê';
        document.getElementById('monthly-payment').textContent = monthlyPayment.toLocaleString('vi-VN', {maximumFractionDigits: 0}) + ' VNƒê';
        document.getElementById('total-interest').textContent = totalInterest.toLocaleString('vi-VN', {maximumFractionDigits: 0}) + ' VNƒê';
        document.getElementById('total-payment').textContent = totalPayment.toLocaleString('vi-VN', {maximumFractionDigits: 0}) + ' VNƒê';

        let advice = '<h4>L·ªùi Khuy√™n:</h4><ul>';
        const downPaymentPercent = (downPayment / propertyValue * 100).toFixed(1);
        if (downPaymentPercent < 20) {
            advice += '<li>‚ö†Ô∏è V·ªën t·ª± c√≥ d∆∞·ªõi 20%. H√£y c·ªë g·∫Øng tƒÉng v·ªën t·ª± c√≥ ƒë·ªÉ gi·∫£m l√£i su·∫•t v√† kho·∫£n vay</li>';
        } else {
            advice += '<li>‚úÖ V·ªën t·ª± c√≥ t·ªët (' + downPaymentPercent + '%)</li>';
        }
        advice += '<li>üí° Kho·∫£n tr·∫£ h√†ng th√°ng n√™n chi·∫øm t·ªëi ƒëa 30-35% thu nh·∫≠p</li>';
        advice += '</ul>';
        document.getElementById('mortgage-advice').innerHTML = advice;
        document.getElementById('mortgage-results').style.display = 'block';
    }
    </script>
</body>
</html>
